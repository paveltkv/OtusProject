Electronic program guide and multimedia playlist aggregator
======

Проект служит для объединения пользовательских листов аудио и видео потоков согласно установленным пользователем правилам, и составления индивидуальной программы передач в автоматическом режиме.

Решаемые проблемы:

* Открытые источники EPG (программы передач) содержат в разной степени полноты наборы программ передач. Отличаются как наборы каналов, так и детализация описаний программ (прим.: название сериала / название сериала и номер и название серии). При составлении EPG, в проекте производится поиск по всем загруженным EPG, и выборка наиболее полного описания в случае пересечения результатов.

* Сервисы, предоставляющие плейлисты, часто обладают скудными возможностями по настройке плейлиста. Часто возможно лишь исключать некоторые каналы. Проект позволяет автоматически формировать плейлист по неточному соответствию имен каналов, как из одного, так и из множества плейлистов. Пользователь может сам определять порядок каналов в плейлисте.

* Ввиду того, что EPG и плейлисты предоставляются разными ресурсами, часто имеет место отсутствие полного соответствия display-name в EPG и tvg-name в плейлистах. Согласно формату, плееры производят сопоставление по полному соответствию. В проекте реализовано сопоставление программ передач и каналов по неполному соответствию, что в ряде случаев позволяет загрузить программу передач для большего числа каналов.

* Предоставляемые открытыми сервисами EPG часто имеют большой вес (> 300 мегабайт в распакованном виде), что не позволяет загружать их в некоторых плеерах на устройствах с малым объемом памяти. Проект генерирует минимальный EPG только под каналы из генерируемого плейлиста. Блягодаря построчной распаковке архивов, для загрузки EPG не требуются большие объемы оперативной памяти, что позволяет устанавливать проект на устройства с ограниченными ресурсами (прим. роутеры).

* Источники EPG сами определяют интервал времени, на который предоставляется программа передач. Проект позволяет накапливать программы передачь на любой интервал времени.

* Проект позволяет выбрать EPG - источник логотипов каналов.

Функции и свойства:

* Регистрация и авторизация пользователей.

* Функции администрирования в основном интерфейсе (администратору доступно управление списками EPG в основном интерфейсе).

* Автоматическая загрузка программ передач XMLTV в форматах .xml.gz, .xml.zip.

* Автоматическая загрузка логотипов в формате zip архива.

* Хранение данных в SQLite базе данных. Заполнение данными реализовано чанками по 10 000 строк.

* Просмотр каналов, логотипов каналов, программ передач, поиск по каналам загруженных программ передач.

* Составление пользовательских листов из загруженного пользователем набора плейлистов по определенному пользователем набору правил.

* Маркировка каналов в сгенерированном плейлисте по плейлистам-источникам.

* Составление программы передач под сгенерированный плейлист.

* Сгенерированные плейлист и программа передач обновляются автоматически с обновлением плейлистов и программ передач - источников.

* Ссылка на сгенерированный плейлист защищена от подбора дополнительным кодом.

* Для презентации добавлены кнопки (красного цвета) для ручного выполнения действий (вместо вызова через cron), а также автоматической вставки тестовых данных.

* Интерфейс построен на базе компонентов getbootstrap.com.

Установка и запуск:

    pip install -r requirements.txt
    python manage.py makemigrations epg_app playlist_app user_app
    python manage.py migrate
    python manage.py createsuperuser
    python manage.py runserver 0.0.0.0:8000
    -> login to the site as administrator

Описание формата XMLTV: https://cesbo.com/ru/latest/utils/xmltv-format

Описание формата m3u8: https://f-player.ru/extm3u-iptv-format

Скриншоты интерфейса
======
![Alt text](https://github.com/paveltkv/OtusProject/raw/master/screenshots/Screenshot_1_channels.png "Channel list")
![Alt text](https://github.com/paveltkv/OtusProject/raw/master/screenshots/Screenshot_2_search.png "Search")
![Alt text](https://github.com/paveltkv/OtusProject/raw/master/screenshots/Screenshot_3_programmes.png "Programmes list")
![Alt text](https://github.com/paveltkv/OtusProject/raw/master/screenshots/Screenshot_4_settings_panel.png "Playlist settings_panel")


Результат в плеере OTT Navigator
======
![Alt text](https://github.com/paveltkv/OtusProject/raw/master/screenshots/OTT_Navigator_screen.png "Result screenshot")
